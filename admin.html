<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† - Ù†Ø´Ø± Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  :root{
    --bg:#f5f5f7;
    --card:#ffffff;
    --text:#1d1d1f;
    --muted:#6e6e73;
    --border:rgba(0,0,0,.12);
    --blue:#0071e3;
    --danger:#d92d20;
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
  }
  .container{
    max-width:980px;
    margin:36px auto;
    padding:0 16px 60px;
  }
  .top{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    flex-wrap:wrap;
    margin-bottom:14px;
  }
  .top h1{margin:0;font-size:22px}
  .top a{
    color:var(--blue);
    text-decoration:none;
    font-size:14px;
  }

  .panel{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:24px;
    padding:18px;
  }

  .grid{
    display:grid;
    grid-template-columns: 1.1fr .9fr;
    gap:14px;
    align-items:start;
  }

  label{display:block;font-size:13px;color:var(--muted);margin:10px 0 6px}

  input{
    width:100%;
    padding:12px 14px;
    border-radius:14px;
    border:1px solid var(--border);
    background:#fff;
    outline:none;
    font-size:14px;
  }

  /* A4-like editor */
  .paper{
    width:100%;
    max-width: 794px; /* ~A4 at 96dpi */
    margin:0 auto;
    background:#fff;
    border:1px solid var(--border);
    border-radius:16px;
    padding:22px;
    box-shadow: 0 10px 30px rgba(0,0,0,.06);
  }
  .editor{
    width:100%;
    min-height: 980px;  /* Ø´ÙƒÙ„ ÙˆØ±Ù‚Ø© */
    max-height: 980px;
    overflow:auto;
    border:none;
    outline:none;
    font-size:15px;
    line-height:1.9;
    resize:none;
    background:transparent;
  }
  .hint{
    font-size:12px;
    color:var(--muted);
    margin-top:8px;
    text-align:center;
  }

  .actions{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top:12px;
  }
  button{
    border:none;
    border-radius:999px;
    padding:12px 18px;
    cursor:pointer;
    font-size:14px;
  }
  .btn-primary{background:var(--blue);color:#fff}
  .btn-ghost{background:#fff;border:1px solid var(--border);color:var(--text)}
  .btn-danger{background:var(--danger);color:#fff}

  .msg{margin:10px 0 0;color:var(--muted);font-size:13px}

  /* Posts list */
  .list{
    margin-top:14px;
    display:grid;
    gap:10px;
  }
  .item{
    background:#fff;
    border:1px solid var(--border);
    border-radius:18px;
    padding:14px;
  }
  .item h3{margin:0 0 6px;font-size:16px}
  .meta{font-size:12px;color:var(--muted)}
  .row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    flex-wrap:wrap;
    margin-top:10px;
  }

  @media (max-width:900px){
    .grid{grid-template-columns:1fr}
    .paper{max-width:100%}
    .editor{min-height:760px;max-height:760px}
  }
</style>
</head>

<body>
  <div class="container">
    <div class="top">
      <h1>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† â€” Ù†Ø´Ø± Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</h1>
      <a href="blog.html">ÙØªØ­ Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©</a>
    </div>

    <div class="panel">
      <div class="grid">
        <!-- Create post -->
        <div>
          <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‚Ø§Ù„</label>
          <input id="title" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙÙŠ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„">

          <label>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø§Ù„ (Ø´ÙƒÙ„ ÙˆØ±Ù‚Ø© A4)</label>
          <div class="paper">
            <textarea id="content" class="editor" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ù…Ù‚Ø§Ù„ Ù‡Ù†Ø§..."></textarea>
          </div>
          <div class="hint">Ù†ØµÙŠØ­Ø©: Ù‡Ø°Ù‡ Ù…Ø³Ø§Ø­Ø© Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† ÙˆØ±Ù‚Ø© A4 Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©.</div>

          <div class="actions">
            <button class="btn-primary" onclick="publish()">Ù†Ø´Ø± Ø§Ù„Ù…Ù‚Ø§Ù„</button>
            <button class="btn-ghost" onclick="clearEditor()">ØªÙØ±ÙŠØº</button>
          </div>
          <div class="msg" id="msg"></div>
        </div>

        <!-- Posts manager -->
        <div>
          <label>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</label>
          <div class="list" id="postsList"></div>
        </div>
      </div>
    </div>
  </div>

<script>
  const LS_KEY = "posts";

  function loadPosts(){
    try { return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); }
    catch { return []; }
  }
  function savePosts(posts){
    localStorage.setItem(LS_KEY, JSON.stringify(posts));
  }

  function publish(){
    const title = document.getElementById('title').value.trim();
    const content = document.getElementById('content').value.trim();

    if(!title || !content){
      alert("ÙƒÙ…Ù‘Ù„ÙŠ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰");
      return;
    }

    const posts = loadPosts();
    posts.unshift({
      id: crypto && crypto.randomUUID ? crypto.randomUUID() : String(Date.now()),
      title,
      content,
      date: new Date().toLocaleDateString('ar-SA')
    });

    savePosts(posts);
    document.getElementById('msg').textContent = "âœ… ØªÙ… Ù†Ø´Ø± Ø§Ù„Ù…Ù‚Ø§Ù„. Ø§ÙØªØ­ÙŠ Ø§Ù„Ù…Ø¯ÙˆÙ†Ø© ÙˆØ´ÙˆÙÙŠÙ‡.";
    document.getElementById('title').value = "";
    document.getElementById('content').value = "";
    renderList();
  }

  function clearEditor(){
    document.getElementById('title').value = "";
    document.getElementById('content').value = "";
    document.getElementById('msg').textContent = "";
  }

  function deletePostById(id){
    const posts = loadPosts();
    const next = posts.filter(p => p.id !== id);
    savePosts(next);
    renderList();
    document.getElementById('msg').textContent = "ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‚Ø§Ù„.";
  }

  function renderList(){
    const wrap = document.getElementById("postsList");
    const posts = loadPosts();
    wrap.innerHTML = "";

    if(posts.length === 0){
      wrap.innerHTML = `<div class="item"><div class="meta">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø§Ù„Ø§Øª Ø¨Ø¹Ø¯.</div></div>`;
      return;
    }

    posts.forEach(p=>{
      const el = document.createElement("div");
      el.className = "item";
      el.innerHTML = `
        <h3>${escapeHtml(p.title)}</h3>
        <div class="meta">${escapeHtml(p.date || "")}</div>
        <div class="row">
          <button class="btn-ghost" onclick="preview('${p.id}')">Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
          <button class="btn-danger" onclick="confirmDelete('${p.id}')">Ø­Ø°Ù</button>
        </div>
        <div id="pv-${p.id}" style="display:none;margin-top:10px;color:#333;line-height:1.9;"></div>
      `;
      wrap.appendChild(el);
    });
  }

  function confirmDelete(id){
    if(confirm("Ù…ØªØ£ÙƒØ¯Ø© ØªØ¨ØºÙŠÙ† ØªØ­Ø°ÙÙŠÙ† Ø§Ù„Ù…Ù‚Ø§Ù„ØŸ")) deletePostById(id);
  }

  function preview(id){
    const posts = loadPosts();
    const p = posts.find(x => x.id === id);
    const box = document.getElementById(`pv-${id}`);
    if(!box) return;

    if(box.style.display === "none"){
      box.style.display = "block";
      box.textContent = p ? p.content : "";
    }else{
      box.style.display = "none";
      box.textContent = "";
    }
  }

  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  renderList();
</script>

</body>
</html>
